{% extends "template.html" %}
{% block content %}
<!-- Header Area -->
		<header class="header" >
			<!-- Topbar -->
			<div class="topbar">
				<div class="container">
					<div class="row">
						<div class="col-lg-6 col-md-5 col-12">
							<div class="text">
								<h5>Office Manager Dashboard</h5>
								<p>Logged in as: {{ name }}</p>
							</div>
						</div>
						<div class="col-lg-6 col-md-7 col-12">
							<!-- Top Contact -->
							<ul class="top-contact">
								<li><i class="fa fa-phone"></i>+880 1234 56789</li>
								<li><i class="fa fa-envelope"></i><a href="mailto:support@medicaloffice.com">support@medicaloffice.com</a></li>
							</ul>
							<!-- End Top Contact -->
						</div>
					</div>
				</div>
			</div>
			<!-- End Topbar -->
			<!-- Header Inner -->
			<div class="header-inner">
				<div class="container">
					<div class="inner">
						<div class="row">
							<div class="col-lg-3 col-md-3 col-12">
								<!-- Start Logo -->
								<div class="logo">
									<a href="#"><img src="../static/img/logo.png" alt="#"></a>
								</div>
								<!-- End Logo -->
								<!-- Mobile Nav -->
								<div class="mobile-nav"></div>
								<!-- End Mobile Nav -->
							</div>
							<div class="col-lg-7 col-md-9 col-12">
								<!-- Main Menu -->
								<div class="main-menu">
									<nav class="navigation">
										<ul class="nav menu">
											<li><a href="{{ url_for('dashboard_managers') }}">Dashboard Home</a></li>
											<li><a href="#">Appointments</a>
											<ul class="dropdown">
													<li><a href="{{ url_for('search') }}">Add New Appointment</a></li>
													<li><a href="#">Cancel & Reschedule Appointment</a></li>
													<li><a href="{{ url_for('appointments') }}">Appointments History</a></li>
													<li><a href="{{ url_for('filter_appointments') }}">Filter Appointments by Date Range</a></li>
												</ul>
											</li>
											<li><a href="#">Patients</a>
											<ul class="dropdown">
													<li><a href="{{ url_for('patients') }}">Patient List</a></li>
													<li><a href="{{ url_for('new_patient_manager') }}">Add New Patient</a></li>
													<li><a href="#">Update Patient Information</a></li>
												</ul>
											</li>
											<li><a href="#">Doctors</a>
												<ul class="dropdown">
													<li><a href="{{ url_for('doctors') }}">Doctors List</a></li>
													<li><a href="{{ url_for('add_doctor') }}">Add New Doctor</a></li>
													<li><a href="#">Update Doctor Information</a></li>
												</ul>
											</li>
											<li><a href="#">Office Clerks</a>
												<ul class="dropdown">
													<li><a href="{{ url_for('officeClerks') }}">Office Clerks List</a></li>
													<li><a href="{{ url_for('add_officeClerk') }}">Add New Office Clerk Member</a></li>
													<li><a href="#">Update Office Clerk Information</a></li>
												</ul>
											</li>
											<li><a href="#">Office Managers</a>
												<ul class="dropdown">
													<li><a href="{{ url_for('officeManagers')}}">Office Managers List</a></li>
													<li><a href="{{ url_for('add_officeManager')}}">Add New Office Managers</a></li>
													<li><a href="#">Update Office Manager Information</a></li>
												</ul>
											</li>
										</ul>
									</nav>
								</div>
								<!--/ End Main Menu -->
							</div>
							<div class="col-lg-2 col-12">
								<div class="get-quote">
									<a href="{{ url_for('index') }}" class="btn">Log Out</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/ End Header Inner -->
		</header>
		<!-- End Header Area -->
<ul>
	<section class="contact-us section">
		<div class="container">
			<div class="inner">
				<h5>Filter Appointments by Date Range</h5>
				 <!-- Flash Messages -->
				{% with messages = get_flashed_messages(with_categories=True) %}
				  {% if messages %}
					<ul>
					  {% for category, message in messages %}
						 <li style="color: green;">{{ message }}</li>
					  {% endfor %}
					</ul>
				  {% endif %}
				{% endwith %}
				<div class="row">
						<div class="col-lg-6">
							<div class="contact-us-form">
								<h2>Search Appointment</h2>
								<!-- Search Form -->
								<form class="form" method="post">
									{{ form.hidden_tag() }}
									<div class="col-lg-6">
										<div class="form-group">
											{{ form.start_date.label }} {{ form.start_date() }}
										</div>
									</div>
									<div class="col-lg-6">
										<div class="form-group">
											{{ form.end_date.label }} {{ form.end_date() }}
										</div>
									</div>
									<div class="col-lg-6">
										<div class="form-group">
											{{ form.submit() }}
										</div>
									</div>
								</form>
							</div>
						</div>
						<div class="container">
							<div class="inner">
							<!-- Search Results -->
									{% if results is not none %}
										<h2>Search Results</h2>
											<table>
												<thead>
													<tr>
														<th>#</th>
														<th>Patient</th>
														<th>Appointment Date</th>
														<th>Appointment Time</th>
														<th>Appointment Type</th>
														<th>Doctor</th>
														<th>Specialty</th>
													</tr>
												</thead>

												<tbody>
													{% for appointment in results %}
													<tr>
														<td>{{ loop.index }}</td>
														<td>{{appointment.patient.person.firstName + " " + appointment.patient.person.lastName}}</td>
														<td>{{appointment.appointmentDate}}</td>
														<td>{{appointment.appointmentTime}}</td>
														<td>{{appointment.appointmentType}}</td>
														<td>{{appointment.doctor.person.firstName + " " + appointment.doctor.person.lastName}}</td>
														<td>{{appointment.doctor.specialization}}</td>
													</tr>
													{% endfor %}
												</tbody>
											</table>
										{% else %}
											<p>No appointments found in the selected range.</p>
									{% endif %}
							</div>

						</div>
					</div>
			</div>
		</div>
	</section>
</ul>
{% endblock %}
